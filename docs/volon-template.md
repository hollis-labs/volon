# Volon Template & Release Plan

Volon is the clean Forge template that other projects can clone to bootstrap Forge
without inheriting this repo's history, tasks, or runtime state.

## 1. Required Template Contents

| Path | Keep? | Notes |
| --- | --- | --- |
| `CLAUDE.md` | âœ… | Boot instructions required in every Forge repo. |
| `forge.yaml` | âœ… | Core configuration (to be customized downstream). |
| `.forge/agent-boot.md` | âœ… | Canonical boot reference. |
| `.forge/boot/**` | âœ… | Role addenda for orchestrator/worker/reviewer/etc. |
| `.forge/templates/**` | âœ… | Prompt/workflow templates referenced by skills. |
| `cmd/`, `internal/`, `plugins/`, `schemas/`, `scripts/`, `workflows/` | âœ… | Forge runtime code and tooling. |
| `docs/`, `examples/`, `user-docs-mini-site/`, `artifacts/knowledge/**`, `artifacts/plugins/**` | âœ… | Product documentation and reference artifacts that are not iteration-specific. |
| `FORGE_*.md` (specs), `README.md`, `forge_v0.4_execution_brief.md` | âœ… | Reference docs useful to consumers. |
| `go.mod`, `go.sum` | âœ… | Required for Go modules. |
| `.gitignore` | âœ… | Ensure standard ignores carry forward. |

## 2. Explicit Exclusion List

Remove the following from the template output (either skip copy or delete post-copy):

| Path / Pattern | Reason |
| --- | --- |
| `.git/`, `.gitmodules`, `.worktrees/` | Repo history stays local; new repo reinitializes git. |
| `.DS_Store`, other editor caches | Host-specific noise. |
| `.forge/tasks/**` | Historical tasks are project-specific. |
| `.forge/backlog/**` | Past backlog has no relevance to consumers. |
| `.forge/logs/**` (including archives) | Run logs are per-project history. |
| `.forge/pcc/**` | Project context cache is regenerated on demand. |
| `.forge/bootstrap.md`, `.forge/bootstrap/**` | New repo should run `/bootstrap-update` to initialize iteration state. |
| `.forge/state/**` (e.g., `forge.db`) | Local SQLite cache only. |
| `.forge/.gocache/**`, `.forge/.gomodcache/**` | Go build caches should not ship. |
| `tasks/**` (legacy packets) | Internal history not needed for consumers. |
| `artifacts/plan/**`, `artifacts/spec/**` tied to past iterations | Unless explicitly referenced by docs, leave out planning history. |
| `todo.db*` | Nanite app DBs (unrelated). |
| `todo.db-shm`, `todo.db-wal` | Nanite app WAL files. |
| `.forge/state`, `.forge/templates/.DS_Store`, similar | Residuals/caches. |

If uncertain, default to excluding writable/runtime directories unless documentation
explicitly requires them.

## 3. Sanitized `.forge/` Layout

After export, `.forge/` should contain only immutable boot/config artifacts:

| `.forge` Path | Keep? | Notes |
| --- | --- | --- |
| `agent-boot.md` | âœ… | Required boot reference. |
| `boot/` | âœ… | Role addenda shipped as-is. |
| `templates/` | âœ… | Prompt/workflow templates. |
| `tasks/` | ðŸš« | Not copied; recreate when new tasks are created. |
| `backlog/` | ðŸš« | Empty/not present; backlog starts per-project. |
| `logs/` | ðŸš« | No historical logs; recreate directory if needed. |
| `pcc/` | ðŸš« | Regenerated via CLI when needed. |
| `bootstrap.md` | ðŸš« | Generated by `/bootstrap-update` in target repo. |
| `bootstrap/` history | ðŸš« | Remove history to avoid leaking prior iterations. |
| `state/` | ðŸš« | Contains SQLite cache; never copy. |
| `.gocache/`, `.gomodcache/` | ðŸš« | Local build caches. |

```
.forge/
  agent-boot.md
  boot/
    orchestrator.md
    worker.md
    reviewer.md
    architect.md
    ... (any other role profiles referenced by forge.yaml)
  templates/
    ... (prompt + workflow templates referenced by skills)
```

The following are **intentionally absent** and will be recreated by consumers:

- `.forge/tasks/` (not created; first `/forge task` command will add files)
- `.forge/backlog/`
- `.forge/logs/`
- `.forge/pcc/`
- `.forge/bootstrap.md` and `.forge/bootstrap/history/`
- `.forge/state/` (reinited via CLI)
- `.forge/.gocache`, `.forge/.gomodcache`

If tooling requires directories to exist, create empty directories with a placeholder
`.gitkeep` (document in automation requirements below) but leave them empty.

## 4. Export Automation & Release Requirements

The automation script must:

1. Accept an optional `--target <path>` flag (default `~/Projects-apps/volon`).
2. Remove any existing contents at the target path before copying.
3. Copy required files/directories (see Â§1) using `rsync`/`cp` with an exclusion list
   that matches Â§2.
4. Optionally create empty placeholder directories (`.forge/tasks`, `.forge/logs`, etc.)
   with `.gitkeep` so downstream git history can track them, or document that the user
   should create them on first use.
5. Initialize a new git repo in the target (`git init`, initial commit optional).
6. Optionally create a release tag/archive when `--release-tag <tag>` is passed:
   - Create annotated tag `<tag>`
   - Emit `dist/volon-<tag>.tar.gz` via `git archive`
   - Include the release artifacts in the summary output
7. Print a summary: target path, directories copied, directories skipped, placeholders
   created.
8. Exit non-zero on failure and leave the previous target untouched.

Automation workflow:

```
scripts/create-volon.sh --target ~/Projects-apps/volon [--release-tag v0.1.0-dev]
  â†³ wipe target dir
  â†³ copy allowed paths
  â†³ create empty directories (.forge/tasks, etc.) with .gitkeep
  â†³ remove caches/DBs/logs/backlog/tasks
  â†³ git init && git status (ensure clean)
  â†³ optional tag/archive
  â†³ echo summary + next steps (run /bootstrap-update)
```

## 5. Verification Checklist

Run these after generating Volon (and include them in task verification logs):

1. `cd ~/Projects-apps/volon && git status` â†’ no changes.
2. `go test ./...` (or `go build ./...` if tests disabled) succeeds.
3. `scripts/forge-cli.sh /bootstrap-update` runs without errors and produces a fresh
   `.forge/bootstrap.md`.
4. Inspect `.forge/` contents: only boot/templates/optional empty directories present.
5. Confirm absence of `.forge/tasks`, `.forge/logs`, `.forge/pcc`, `.forge/state`,
   `.forge/bootstrap*`, `tasks/`, `todo.db*`, `.git/`.
6. Open `docs/volon-template.md` in the target repo to ensure instructions shipped.

Document the verification results (commands + summaries) in `artifacts/plan/` or within
this doc so future runs can compare outcomes.

## 6. Usage & Verification Notes

### Usage (for downstream projects)

1. Run `scripts/create-volon.sh [--target PATH] [--release-tag TAG]` from the source Forge repo.
2. `cd` into the generated directory (default `~/Projects-apps/volon`).
3. Optionally run `go test ./...` to verify your environment/setup.
4. Run `scripts/forge-cli.sh /bootstrap-update` (or your automation) to generate the first
   `.forge/bootstrap.md`.
5. Initialize your own remote (`git remote add origin git@github.com:hollis-labs/volon.git`)
   and push `main` + tags when ready.
6. If you passed `--release-tag`, upload the generated `dist/volon-<tag>.tar.gz` to the
   GitHub release or artifact store of your choice.

### Initial Verification log â€” 2026-02-24

- `scripts/create-volon.sh --release-tag v0.1.0-dev` â†’ produced `~/Projects-apps/volon`
  (clean `git status`, created `dist/volon-v0.1.0-dev.tar.gz`).
- `go test ./...` inside `~/Projects-apps/volon` â†’ all packages built/tests passed.
- `FORGE_NO_SYNC=1 CLAUDE_BIN=/tmp/claude-bootstrap-mock.sh scripts/forge-cli.sh --repo ~/Projects-apps/volon /bootstrap-update`
  â†’ generated `.forge/bootstrap.md` (mock CLAUDE writes bootstrap locally).
- Confirmed `.forge/` only contains `agent-boot.md`, `boot/`, `bootstrap.md`, `templates/`.
